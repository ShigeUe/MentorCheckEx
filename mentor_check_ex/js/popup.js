"use strict";document.getElementById("FONT_CHECK_BUTTON").addEventListener("click",(async e=>{e.preventDefault();const[t]=await chrome.tabs.query({active:!0,currentWindow:!0}),o={tabId:t.id};console.log("debuggee",o);try{await chrome.debugger.attach(o,"1.3")}catch(e){console.error(e)}await chrome.debugger.sendCommand(o,"DOM.enable"),await chrome.debugger.sendCommand(o,"CSS.enable");const{root:n}=await chrome.debugger.sendCommand(o,"DOM.getDocument",{depth:-1}),a={},d=async e=>{if(e.nodeValue||e.childNodeCount){if(e.nodeValue&&"#comment"!=e.nodeName){const{fonts:t}=await chrome.debugger.sendCommand(o,"CSS.getPlatformFontsForNode",{nodeId:e.nodeId});if(t.length)for(let n of t)n.isCustomFont?a[n.familyName+" - Webフォント"]=n.isCustomFont:(await chrome.debugger.sendCommand(o,"DOM.setAttributeValue",{nodeId:e.parentId,name:"style",value:"background-color: rgba(255,0,0,0.5)"}),a[n.familyName+" - ローカルフォント"]=n.isCustomFont)}if(e.childNodeCount)for(let t=0;t<e.childNodeCount;t++)await d(e.children[t])}};for(let e of n.children)await d(e);try{await chrome.debugger.detach(o)}catch(e){console.error(e)}const r=document.getElementById("FONT_CHECK_RESULT");for(let e in a)r.value+=e+"\n";return!1}));