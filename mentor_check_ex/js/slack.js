"use strict";console.debug(Date.now()+" Override WebSocket.onmessage."),window.onmessagegetter=Object.getOwnPropertyDescriptor(window.WebSocket.prototype,"onmessage").get,window.onmessagesetter=Object.getOwnPropertyDescriptor(window.WebSocket.prototype,"onmessage").set,Object.defineProperty(window.WebSocket.prototype,"onmessage",{get(){return window.onmessagegetter.apply(this)},set(){const e=arguments[0];return arguments[0]=t=>{if(t.data){const e=JSON.parse(t.data);"user_typing"==e.type&&setTimeout((()=>{const t=document.querySelector('.p-channel_sidebar__channel[data-qa-channel-sidebar-channel-id="'+e.channel+'"]');t&&(t.style.backgroundColor="rgba(0,255,0,0.2)",setTimeout((()=>{t.style.backgroundColor=""}),500))}),0),e.type&&"message"===e.type&&e.subtype&&"bot_message"===e.subtype&&e.text.match(/課題.*([^再]提出|レビュー中)/)&&window.postMessage({SlackMessageData:t.data},"*")}return e(t)},window.onmessagesetter.apply(this,arguments)}});