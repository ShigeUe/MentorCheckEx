(()=>{"use strict";class e{#e=document.body;queryId(t){return e.queryId(t)}static queryId(e){const t=document.getElementById(e);if(null===t)throw new Error(`要素が取得できませんでした。ID:${e}`);return t}static queryAll(e){return document.querySelectorAll(e)}queryAll(e){return this.#e.querySelectorAll(e)}static query(t,r){return e._query(null,t,r??!1)}query(t,r){return e._query(this.#e,t,r??!1)}static _query(e,t,r){const s=(e??document).querySelector(t);if(null===s){if(void 0===r||void 0!==r&&!r)throw new Error(`要素が取得できませんでした。Selector:${t}`);return null}return s}get_document(){return this.#e}set_document(e){return this.#e=e,this}static notify(e,t){chrome.runtime.sendMessage({type:"notification",title:e,body:t})}}class t{_element;constructor(e){this._element="string"==typeof e?document.createElement(e):"object"==typeof e?e:document.createElement("s")}static create(e){return new t(e)}addClass(e){return"string"==typeof e&&""!==e?this._element.classList.add(e):e&&"Array"===e.constructor.name&&e.forEach((e=>this.addClass(e)),this),this}removeClass(e){return this._element.classList.remove(e),this}addEventListener(e,t){return this._element.addEventListener(e,t),this}prop(e,t){if("object"==typeof e)this._setObjectProp(this._element,e);else{const r=this._element;if(void 0===t)return e in r?String(r[e]):"";e in r&&(r[e]=t)}return this}_setObjectProp(e,t){Object.keys(t).forEach((r=>{const s=t[r],n=e;"object"==typeof s?this._setObjectProp(n[r],s):n[r]=s}),this)}get(){return this._element}set(e){return this.constructor(e),this}appendChild(e){return this._element.append(e instanceof t?e.get():e),this}insertFirst(e){return this._element.insertBefore(e instanceof t?e.get():e,this._element.firstChild),this}text(e){return void 0===e?this._element.innerText:(this._element.innerText=e,this)}style(e){return Object.keys(e).forEach((t=>{this._element.style.setProperty(t,e[t])}),this),this}}const r=e.query("#eachMentors table tbody"),s=e.query("#billy-navbar-collapse > :last-child .mentor-name").innerText,n=e.queryAll("#myShift table tr");if(n.length)for(let e=1;e<n.length;e++){const i=t.create(n[e].cloneNode(!0)),l=t.create("td").text(s),a=t.create("td").text("-------------------");i.insertFirst(a),i.insertFirst(l),r.appendChild(i.get())}const i=Array.from(e.queryAll("#eachMentors table tbody tr"));i.sort(((e,t)=>{const r=e.children[1].innerText,s=t.children[1].innerText;return r==s?e.children[2].innerText>t.children[2].innerText?1:-1:r>s?1:-1})),r.innerHTML="",i.forEach((e=>r.appendChild(e)));const l=e.queryAll("#eachMentors table tbody tr td:nth-of-type(3)"),a=e.queryAll("#eachMentors table tbody tr td:nth-of-type(4)"),c={};a.forEach((e=>{e.innerText.split(", ").forEach((e=>{c[e]=1}))}));const o=Object.keys(c);o.sort().push("すべて");const d=(t,r)=>{"course"===t?(e.queryId("plugin-time-mo").classList.remove("selected"),e.queryId("plugin-time-am").classList.remove("selected"),e.queryId("plugin-time-pm").classList.remove("selected"),a.forEach((e=>{const t=e.parentElement;t.style.display="",t.dataset.course="",t.dataset.ampm="",e.innerText.indexOf(r)<0&&"すべて"!=r&&(t.style.display="none",t.dataset.course="hide")}))):"ampm"===t&&l.forEach((e=>{const t=e.parentElement;t&&t.dataset.ampm&&(t.style.display="",t.dataset.course=""),t&&e.innerText.indexOf(r)<0&&!t.dataset.course&&(t.style.display="none",t.dataset.ampm="hide")}))},u=t=>{e.query("#plugin-button-area button.selected").classList.remove("selected");const r=t.target;r.classList.add("selected");const s=r.dataset.course??"";return d("course",s),!1},p=e.query("#eachMentors table");let m,h=t.create("div").prop({id:"plugin-button-area"});o.forEach((e=>{m=t.create("button").prop({type:"button",dataset:{course:e},innerText:e}).addClass("すべて"===e?"selected":"").addEventListener("click",u),h.appendChild(m)}));const y=t.create("br");h.appendChild(y),m=t.create("button").prop({id:"plugin-time-mo",type:"button",innerText:"午前"}).addEventListener("click",(t=>{t.target.classList.add("selected"),e.queryId("plugin-time-am").classList.remove("selected"),e.queryId("plugin-time-pm").classList.remove("selected"),d("ampm","午前")})),h.appendChild(m),m=t.create("button").prop({id:"plugin-time-am",type:"button",innerText:"前半"}).addEventListener("click",(t=>{t.target.classList.add("selected"),e.queryId("plugin-time-mo").classList.remove("selected"),e.queryId("plugin-time-pm").classList.remove("selected"),d("ampm","前半")})),h.appendChild(m),m=t.create("button").prop({id:"plugin-time-pm",type:"button",innerText:"後半"}).addEventListener("click",(t=>{t.target.classList.add("selected"),e.queryId("plugin-time-mo").classList.remove("selected"),e.queryId("plugin-time-am").classList.remove("selected"),d("ampm","後半")})),h.appendChild(m),p.before(h.get()),e.queryAll("#eachMentors table tr td:nth-of-type(3)").forEach((e=>{const r=e.innerText.split("〜");if("11:00"==r[0]||"15:00"==r[1]){const r=t.create("span").prop({innerText:"午前"}).addClass("plugin-time-mo");e.appendChild(r.get())}if("15:00"==r[0]||"19:00"==r[1]){const r=t.create("span").prop({innerText:"前半"}).addClass("plugin-time-am");e.appendChild(r.get())}if("19:00"==r[0]||"23:00"==r[1]){const r=t.create("span").prop({innerText:"後半"}).addClass("plugin-time-pm");e.appendChild(r.get())}}))})();